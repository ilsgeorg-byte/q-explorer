<div class="page-header">
    <a href="javascript:history.back()" class="btn-see-all" style="margin-bottom:10px; display:inline-block;">‚Üê
        Back</a>
    <span class="btn-see-all" onclick="sharePage()" style="margin-left: 20px; cursor: pointer;">üîó Share</span>
</div>
<div class="artist-hero hero-center">
    {% if artist_image %}<img src="{{ artist_image }}" class="hero-center-img round">{%
    endif %}

    <div class="hero-title-row">
        <h1 class="hero-title-text">{{ artist.artistName }}</h1>
        <div class="btn-like hero-like"
            onclick="toggleLike(this, 'artist', '{{ artist.artistId }}', '{{ artist.artistName|replace('\'', '\\\'') }}', '{{ artist_image or '' }}', '{{ artist.primaryGenreName }}', '')">
            ‚ô•
        </div>
    </div>

    <!-- Tags -->
    <div class="hero-meta hero-meta-center">
        <span class="tag" style="color:var(--primary); border-color:var(--primary);">{{ artist.primaryGenreName
            }}</span>
        {% if artist.tags %}
        {% for tag in artist.tags %}
        <!-- NOW THIS IS A LINK -->
        <a href="/tag/{{ tag }}" class="tag">
            {{ tag|capitalize }}
        </a>
        {% endfor %}
        {% endif %}

        {% if artist.stats %}<div class="stats-badge">{{ artist.stats }}</div>{% endif %}
    </div>

    <!-- BIOGRAPHY -->
    {% if artist.bio %}
    <div class="hero-bio">
        {{ artist.bio }}
    </div>
    {% endif %}
</div>

<!-- TOP SONGS (Immediately after Hero) -->
{% if top_songs %}
<div class="section-header">
    <h2 class="section-title">Top Songs</h2>
</div>
<div class="song-list" style="margin-bottom: 30px;">
    {% for song in top_songs %}
    <div class="song-row" style="display: flex; align-items: center;"
        onclick="openMusicModal('{{ song.spotify_link }}', '{{ song.collectionId }}', '{{ song.trackId }}', '{{ song.youtube_link }}', '{{ song.trackName|replace('\'', '\\\'') }}', '{{ song.artistName|replace('\'', '\\\'') }}', '{{ song.artworkUrl100 }}')">
        <img src="{{ song.artworkUrl100 }}" class="song-img">
        <div class="song-info">
            <div class="song-title">{{ song.trackName }}</div>
            <div class="song-artist" style="opacity: 0.7;">{{ song.collectionName }}</div>
        </div>
        <!-- Like -->
        <div class="song-actions" style="margin-left: auto; display: flex; gap: 10px; align-items: center;">
            <div class="btn-playlist btn-icon" style="cursor: pointer; font-size: 20px;"
                onclick="showPlaylistPicker(this, '{{ song.trackId }}', '{{ song.trackName|replace('\'', '\\\'') }}', '{{ song.artistName|replace('\'', '\\\'') }}', '{{ song.artworkUrl100 }}')">
                Ôºã
            </div>
            <div class="btn-like song-like" style="position: static; opacity: 1; transform: scale(1);"
                onclick="toggleLike(this, 'song', '{{ song.trackId }}', '{{ song.trackName|replace('\'', '\\\'') }}', '{{ song.artworkUrl100 }}', '{{ song.artistName|replace('\'', '\\\'') }}', '{{ song.spotify_link }}')">
                ‚ô•</div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if similar %}
<div class="section-header">
    <h2 class="section-title">Fans also like</h2>
</div>
<div class="grid">
    {% for sim in similar %}
    <!-- Link points to smart redirect -->
    <a href="/redirect-artist?name={{ sim.name }}" class="similar-card" onclick="void(0)">

        <div class="artist-img-wrapper" data-artist-name="{{ sim.name }}">
            <!-- Placeholder while loading -->
            <div class="artist-placeholder artist-placeholder-default">
                {{ sim.name[:1] }}
            </div>
        </div>

        <span style="font-size: 0.9rem; font-weight: 500; max-width: 110px; line-height: 1.2;">{{ sim.name }}</span>
    </a>
    {% endfor %}
</div>
{% endif %}
{% for cat, items in discography.items() %}
{% if items %}
<div class="section-header">
    <h2 class="section-title">{{ cat|capitalize }}</h2>
</div>
<div class="grid">
    {% for item in items %}
    <a href="/album/{{ item.collectionId }}" class="card" onclick="void(0)">
        <div class="btn-like"
            onclick="toggleLike(this, 'album', '{{ item.collectionId }}', '{{ item.collectionName|replace('\'', '\\\'') }}', '{{ item.artworkUrl100 }}', '{{ item.artistName|replace('\'', '\\\'') }}', '')">
            ‚ô•</div>
        <img src="{{ item.artworkUrl100 }}">
        <div class="info" style="text-align: center;">
            <div class="title">{{ item.collectionName }}</div>
            <div class="sub">{{ item.releaseDate[:4] }}</div>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}
{% endfor %}