<div class="page-header">
    <a href="/?q={{ query }}" class="btn-see-all" style="margin-bottom:10px; display:inline-block;">← Back to
        Search</a>
    <h1 style="font-size: 24px; margin-bottom: 20px;">All {{ type|capitalize }} for "{{ query }}"</h1>
</div>

{% if not results %}
<div style="text-align:center; padding: 40px; color:#666;">No results found.</div>
{% else %}

{% if type == 'songs' %}
<div class="song-list">
    {% for item in results %}
    <div class="song-row" style="display: flex; align-items: center;"
        onclick="openMusicModal('{{ item.spotify_link }}', '{{ item.collectionId }}', '{{ item.trackId }}', '{{ item.youtube_link }}')">
        <img src="{{ item.artworkUrl100 }}" class="song-img">
        <div class="song-info">
            <div class="song-title">{{ item.trackName }}</div>
            <div class="song-artist">{{ item.artistName }}</div>
        </div>
        <div class="song-actions" style="margin-left: auto; display: flex; gap: 10px; align-items: center;">
            <div class="btn-playlist btn-icon" style="cursor: pointer; font-size: 20px;"
                onclick="showPlaylistPicker(this, '{{ item.trackId }}', '{{ item.trackName|replace('\'', '\\\'') }}', '{{ item.artistName|replace('\'', '\\\'') }}', '{{ item.artworkUrl100 }}')">
                ＋
            </div>
            <div class="song-like btn-like" style="position: static; opacity: 1; transform: scale(1);"
                onclick="toggleLike(this, 'song', '{{ item.trackId }}', '{{ item.trackName|replace('\'', '\\\'') }}', '{{ item.artworkUrl100 }}', '{{ item.artistName|replace('\'', '\\\'') }}', '{{ item.spotify_link }}')">
                ♥</div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="grid">
    {% for item in results %}
    {% if type == 'artists' %}
    <a href="/artist/{{ item.artistId }}" class="card artist-card" onclick="void(0)">
        <div class="btn-like"
            onclick="toggleLike(this, 'artist', '{{ item.artistId }}', '{{ item.artistName|replace('\'', '\\\'') }}', '{{ item.image }}', '{{ item.primaryGenreName }}', '')">
            ♥</div>

        <!-- WRAPPER ДЛЯ ЛЕНИВОЙ ЗАГРУЗКИ -->
        <div class="artist-img-wrapper" data-artist-id="{{ item.artistId }}">
            {% if item.image %}
            <img src="{{ item.image }}">
            {% else %}
            <div class="artist-placeholder"
                style="background-color: hsl({{ (item.artistName|length * 50) % 360 }}, 60%, 40%);">
                {{ item.artistName[:1] }}
            </div>
            {% endif %}
        </div>

        <div class="info" style="text-align: center;">
            <div class="title">{{ item.artistName }}</div>
        </div>
    </a>
    {% elif type == 'albums' %}
    <a href="/album/{{ item.collectionId }}" class="card" onclick="void(0)">
        <div class="btn-like"
            onclick="toggleLike(this, 'album', '{{ item.collectionId }}', '{{ item.collectionName|replace('\'', '\\\'') }}', '{{ item.artworkUrl100 }}', '{{ item.artistName|replace('\'', '\\\'') }}', '')">
            ♥</div>
        <img src="{{ item.artworkUrl100 }}">
        <div class="info" style="text-align: center;">
            <div class="title">{{ item.collectionName }}</div>
            <div class="sub">
                {{ item.artistName }}
                {% if item.year %}• {{ item.year }}{% endif %}
            </div>
        </div>
    </a>
    {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endif %}