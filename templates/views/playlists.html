<section class="playlists-section animate-in">
    <div class="section-header">
        <h2 class="section-title">My Playlists</h2>
        <button class="btn-premium btn-premium-primary" onclick="showCreatePlaylistModal()">
            <span class="icon" style="margin-right: 8px;">ï¼‹</span> Create Playlist
        </button>
    </div>

    {% if playlists %}
    <div class="playlists-grid">
        {% for playlist in playlists %}
        <div class="playlist-card glass-card" onclick="window.location.href='/playlist/{{ playlist.id }}'">
            <div class="playlist-art">
                {% if playlist.items %}
                {% set ns = namespace(found=[]) %}
                {% for item in playlist.items %}
                {% if item.image_url not in ns.found and ns.found|length < 4 %} {% set ns.found=ns.found +
                    [item.image_url] %} {% endif %} {% endfor %} <div class="art-collage">
                    {% for img in ns.found %}
                    <img src="{{ img }}" loading="lazy">
                    {% endfor %}
            </div>
            {% else %}
            <div class="empty-art">ðŸŽµ</div>
            {% endif %}
            <div class="art-overlay">
                <span class="play-icon">â–¶</span>
            </div>
        </div>
        <div class="playlist-info">
            <h3>{{ playlist.name }}</h3>
            <p>{{ playlist.items|length }} tracks</p>
            <div class="playlist-actions">
                <button class="btn-delete-mini"
                    onclick="event.stopPropagation(); deletePlaylist('{{ playlist.id }}', true)"
                    title="Delete">Delete</button>
            </div>
        </div>
    </div>
    {% endfor %}
    </div>
    {% else %}
    <div class="empty-state glass-card">
        <div class="empty-icon">ðŸ’¿</div>
        <h3>You don't have any playlists yet</h3>
        <p>Create your first playlist to collect your favorite music in one place.</p>
        <button class="btn-primary" onclick="showCreatePlaylistModal()">Create Now</button>
    </div>
    {% endif %}
</section>